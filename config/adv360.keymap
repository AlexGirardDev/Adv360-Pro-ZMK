#include <behaviors.dtsi>
#include <dt-bindings/zmk/keys.h>
#include <dt-bindings/zmk/bt.h>
#include <dt-bindings/zmk/rgb.h>
#include <dt-bindings/zmk/backlight.h>

#define __ &trans
#define __________ &trans
#define W_UP &kp LG(UP)
#define W_DWN &kp LG(DOWN)
#define W_LFT &kp LG(LEFT)
#define W_RGT &kp LG(RIGHT)


#define WM_F_L  &kp LC(LA(LEFT))
#define WM_F_R  &kp LC(LA(RIGHT))
#define WM_F_U  &kp LC(LA(UP))
#define WM_F_D  &kp LC(LA(DOWN))

#define BASE 0
#define QWRT 3
#define GAME 4
#define RED 5
#define SYMB 6
#define FKEYS 7
#define TILING 8

#define RGBTGL &rgb_ug RGB_TOG
#define BLTGL &bl BL_TOG

/ {
    behaviors {
      #include "macros/macros.dtsi"
      #include "macros/zvd.dtsi"
      #include "macros/WM.dtsi"

      hm: homerow_mods {
          compatible = "zmk,behavior-hold-tap";
          label = "HOMEROW_MODS";
          #binding-cells = <2>;
          tapping-term-ms = <200>;
          quick_tap_ms = <175>;
          flavor = "tap-preferred";
          bindings = <&kp>, <&kp>;
      };
    };

        //&kp LA(F4) &kp LG(LC(N1)) &kp LG(LC(N2)) &kp LG(LC(N3)) &kp LG(LC(N4)) &kp LG(LC(N5))    &kp KP_NUMLOCK                                      __________ &kp LG(LC(N6))    &kp LG(LC(N7))    &kp LG(LC(N8))    &kp LG(LC(N9))    &DESK_VW   __________ 
        //&kp GRAVE  &kp N1     &kp N2     &kp N3     &kp N4     &kp N5     &kp F5                                                          __________ &kp N6     &kp N7     &kp N8     &kp N9     &kp N0     &trans
  keymap {
    compatible = "zmk,keymap";

    default_layer {
      bindings = <
        &kp GRAVE  &kp N1     &kp N2     &kp N3     &kp N4     &kp N5     &kp F5                                                          __________ &kp N6     &kp N7     &kp N8     &kp N9     &kp N0     &trans
        &kp TAB    &kp SQT    &kp COMMA  &kp PERIOD &kp P      &kp Y      &kp EQUAL                                                       __________ &kp F      &kp G      &kp C      &kp R      &kp L      &kp HOME
        &kp ESC    &kp A      &kp O      &kp E      &kp U      &kp I      &kp F12      &kp LGUI   &kp LALT        &kp LGUI   &SPOTLIGHT   __________ &kp D      &kp H      &kp T      &kp N      &kp S      &kp END
        &kp LSHFT  &kp SLASH  &kp Q      &kp J      &kp K      &kp X                   __ __      &kp DEL  __  __ &kp HOME   __ __                   &kp B      &kp M      &kp W      &kp V      &kp Z      &kp ENTER
        &kp LCTRL  &kp UP     &kp DOWN   &kp LBKT   &kp N9                &kp SPACE    &kp BSPC   &mo RED         &kp END    &mo SYMB     &mo RED               &kp N0   &kp RBKT   &kp LEFT   &kp RIGHT    &kp K_APP
      >;
    };

    empty_1 {
      bindings = <
        __________ __________ __________ __________ __________ __________ __________                                                      __________ __________ __________ __________ __________ __________ &trans
        __________ __________ __________ __________ __________ __________ __________                                                      __________ __________ __________ __________ __________ __________ __________ 
        __________ __________ __________ __________ __________ __________ __________   __________ __________      __________ __________   __________ __________ __________ __________ __________ __________ __________ 
        __________ __________ __________ __________ __________ __________              &_&_       &trans    &_ &_ __________  &_&_                    __________ __________ __________ __________ __________ __________ 
        __________ __________ __________ __________ __________            __________   __________ __________      __________ __________   __________            __________ __________ __________ __________ __________ 
      >;
    };

    empty_2 {
      bindings = <
        __________ __________ __________ __________ __________ __________ __________                                                      __________ __________ __________ __________ __________ __________ &trans
        __________ __________ __________ __________ __________ __________ __________                                                      __________ __________ __________ __________ __________ __________ __________ 
        __________ __________ __________ __________ __________ __________ __________   __________ __________      __________ __________   __________ __________ __________ __________ __________ __________ __________ 
        __________ __________ __________ __________ __________ __________              &_&_       &trans    &_&_  __________ &_&_                    __________ __________ __________ __________ __________ __________ 
        __________ __________ __________ __________ __________            __________   __________ __________      __________ __________   __________            __________ __________ __________ __________ __________ 
      >;
    };
    empty_3 {
      bindings = <
        __________ __________ __________ __________ __________ __________ __________                                                      __________ __________ __________ __________ __________ __________ &trans
        __________ __________ __________ __________ __________ __________ __________                                                      __________ __________ __________ __________ __________ __________ __________ 
        __________ __________ __________ __________ __________ __________ __________   __________ __________      __________ __________   __________ __________ __________ __________ __________ __________ __________ 
        __________ __________ __________ __________ __________ __________              &_&_       &trans    &_&_  __________ &_&_                    __________ __________ __________ __________ __________ __________ 
        __________ __________ __________ __________ __________            __________   __________ __________      __________ __________   __________            __________ __________ __________ __________ __________ 
      >;
    };
    qwerty {
      bindings = <
        __________ __________ __________ __________ __________ __________ __________                                                      __________ __________ __________ __________ __________ __________ __________ 
        &kp TAB    &kp Q      &kp W      &kp E      &kp R      &kp T      __________                                                      __________ &kp Y      &kp U      &kp I      &kp O      &kp P      &kp BSLH
        &kp ESC    &kp A      &kp S      &kp D      &kp F      &kp G      &to BASE     __________ __________      __________ __________   __________ &kp H      &kp J      &kp K      &kp L      &kp SEMI   &kp SQT
        &kp LSHFT  &kp Z      &kp X      &kp C      &kp V      &kp B                   &_&_       __________ &_&_ __________ &_&_                    &kp N      &kp M      &kp COMMA  &kp DOT    &kp FSLH   &kp RSHFT
        __________ __________ __________ __________ __________            __________   __________ __________      __________ __________   __________            __________ __________ __________ __________ &trans    
      >;
    };
    fn {
      bindings = <
        &AF4       &WM_WS_1   &WM_WS_2   &WM_WS_3   &WM_WS_4   &WM_WS_5   &WM_STACK_T                                                     __________ &WM_WS_6   &WM_WS_7   &WM_WS_8   &WM_WS_9   &WM_WS_10  __________
        &AT_QCK    &ditto     &kp LC(X)  &kp LC(C)  &kp LC(V)  &kp PSCRN  &kp F14                                                         &DSK_UP    &kp EQUAL  &kp N7     &kp N8     &kp N9     &kp MINUS  &trans
        &AT_TOG    &WM_LEFT   &WM_DOWN   &WM_UP     &WM_RIGHT  &WM_MON    &kp F15      &bt BT_SEL 0 &bt BT_SEL 1  RGBTGL     __________   &DSK_DN    &WM_PROM   &kp N4     &kp N5     &kp N6     &kp PLUS   __________ 
        __________ &kp LC(Z)  &kp LC(Y)  &kp LC(A)  &WM_FLOAT  &WM_MANAGE       &_&_   __________ &_&_ BLTGL      &_&_                    &none      &kp N5     &kp N2     &kp N3     &kp EQUAL  __________ 
        __________ __________ __________ &WM_STACK_C &WM_FOCUS            __________   &mo FKEYS  __________      __________ __________   __________            __________ &kp N0     __________ __________ __________ 
      >;
    };
//        &kp F1     &kp F2     &kp F3     &kp F4     &kp F5     &kp F6     __________                                                      __________ &kp F7     &kp F8     &kp F9     &kp F10    &kp F11    &kp F12 
    symbol {
      bindings = <
        __________ __________ __________ __________ __________ __________ __________                                                      __________ __________ __________ __________ __________ __________ __________ 
        &AT_QCK    &kp EXCL   &kp AT     &kp HASH   &kp DLLR   &kp PRCNT  __________                                                      __________ &kp CARET  &kp AMPS   &kp STAR   &kp LPAR   &kp RPAR   __________ 
        __________ &kp LBKT   &kp SEMI   &kp LBRC   &kp LPAR   &kp GRAVE  __________   __________ &RDC_X          __________ __________   __________ &kp TILDE  &kp RPAR   &kp RBRC   &kp COLON  &kp RBKT   __________ 
        __________ &kp QMARK  &kp MINUS  &kp BSLH   &kp EQUAL  &kp LT                  &_&_       __________ &_&_ __________ &_&_                    &kp GT     &kp PLUS   &kp PIPE   &kp UNDER  &kp SLASH  __________ 
        __________ &kp C_VOL_UP &kp C_VOL_DN &kp C_MUTE    __________     __________   &mo TILING __________      __________ __________              __________ __________ __________ &kp C_PP     &kp C_NEXT  __________ 
      >;
    };
    fkeys {
      bindings = <
        &trans     &trans     &trans     &trans     &trans     &trans     &bootloader                                                     &trans     &trans     &kp F10    &kp F11    &kp F12    &trans     &trans
        &trans     &trans     &trans     &trans     &trans     &trans     &trans                                                          &trans     &trans     &kp F7     &kp F8     &kp F9     &trans     &trans     
        &trans     &kp UP     &kp DOWN   &kp LEFT   &kp RIGHT  &trans     &trans       &to QWRT   &trans          &trans     &trans       &trans     &trans     &kp F4     &kp F5     &kp F6     &trans     &trans     
        &trans     &trans     &trans     &trans     &trans     &trans                  &_&_       &trans    &_ &_&trans      &_&_                    &trans     &kp F1     &kp F2     &kp F3     &trans     &trans     
        &trans     &trans     &trans     &trans     &trans                &trans       &bt BT_CLR     &trans          &trans     &trans       &trans                &trans     &trans     &trans     &trans     &trans     
      >;
    };

    wm {
      bindings = <
        &AF4       &WM_WS_1   &WM_WS_2   &WM_WS_3   &WM_WS_4   &WM_WS_5   __________                                                      __________ &WM_WS_6   &WM_WS_7   &WM_WS_8   &WM_WS_9   &WM_WS_10  __________
        &AT_QCK    __________ __________ __________ __________ __________ __________                                                      __________ __________ __________ __________ __________ __________ __________ 
        &AT_TOG    &WM_LEFT   &WM_DOWN   &WM_UP     &WM_RIGHT  __________ __________   __________ __________      __________ __________   __________ __________ __________ __________ __________ __________ __________ 
        __________ WM_F_L     WM_F_D     WM_F_U     WM_F_R                             &_&_       __________ &_&_ __________ &_&_                    __________ __________ __________ __________ __________ __________ 
        __________ __________ __________ __________ __________            __________   __________ __________      __________ __________   __________            __________ __________ __________ __________ __________ 
      >;
    };
    };
};